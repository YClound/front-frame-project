<!-- https://mp.weixin.qq.com/s/k4z6wQG6NBZdEcGLcmc_uw -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>动态生成CSS轮播动画</title>
  <style>
    .keyframe-container {
      width: 100px;
      height: 100px;
      overflow: hidden;
    }

    .keyframe-content {
      display: flex;
      animation: discolor 5s linear infinite;
    }

    .keyframe-content-item {
      width: 100px;
      height: 100px;
      font-size: 32px;
      line-height: 100px;
      text-align: center;
      flex-shrink: 0;
    }

    @keyframes discolor {
      0% {
        transform: translateX(0px);
      }

      16.6% {
        transform: translateX(-100px);
      }

      33.2% {
        transform: translateX(-100px);
      }

      49.8% {
        transform: translateX(-200px);
      }

      66.4% {
        transform: translateX(-200px);
      }

      83% {
        transform: translateX(-300px);
      }

      100% {
        transform: translateX(-300px);
      }
    }
  </style>
</head>

<body>
  <div style="display: flex; align-items: center; height: 50px; font-size: 30px; padding: 100px 0 0 100px;">
    <input type="checkbox" style="width: 50px; height: 50px;" id="horizontal" checked="true" onchange="refresh()"> 横向排列
    <input type="checkbox" style="width: 50px; height: 50px; margin-left: 50px;" id="overflow-hidden" checked="true"
      onchange="refresh()"> 超出隐藏

    <button id="plusButton"
      style="display: inline-block; width: 300px; height: 80px; margin-left: 50px; background-color: #fcb526; color: #3395d6; font-size: 35px; border-radius: 25px;"
      onclick="plus()">展位+1</button>
  </div>

  <div id="demoDisplay">
    <div id="demoContainer"></div>
  </div>
  <!-- <div class="keyframe-container">
    <div class="keyframe-content">
      <div class="keyframe-content-item" style="background-color: #ff614c;">1</div>
      <div class="keyframe-content-item" style="background-color: #bfdc36;">2</div>
      <div class="keyframe-content-item" style="background-color: #6e80e6;">3</div>
      <div class="keyframe-content-item" style="background-color: #ff614c;">1</div>
    </div>
  </div> -->

  <script>
    const palette = ['#863d91', '#f29900', '#f2de5c', '#f7e9d0', '#b893b6'];
    const ANIM_NAME = 'carousel-anim';
    const scrollTime = 0.5;
    const displayTime = 2;
    const step = 150;
    const blankStep = 30;

    // 获取内置展位背景色
    function getPaletteColor(index) {
      return palette[index % palette.length];
    }

    // 创建展位element节点
    function creaeItemElement(isHorizontal, bgColor) {
      const itemDiv = document.createElement('div');
      itemDiv.className = 'item';
      const itemText = document.createTextNode('title');
      itemDiv.appendChild(itemText);
      return itemDiv;
    }

    let count = 0;

    plus();


    function plus(isHorizontal, isOverflowHidden) {
      count++;
      document.getElementById('plusButton').textContent = `展位数(${count}) +1`;

      appendItem2Container(isHorizontal);

      refresh();
    }

    function refresh() {

    }


    // 追加展位节点到展位容器，为了实现循环滚动在展位为2时，在展位尾部追加展位1，
    function appendItem2Container(isHorizontal) {
      const demoContainer = document.getElementById('demoContainer');
      const newItem = creaeItemElement(isHorizontal);
      if (count === 1) {
        demoContainer.appendChild(newItem);
      } else if (count === 2) {
        demoContainer.appendChild(newItem);
        const newItem2 = creaeItemElement(isHorizontal);
        demoContainer.appendChild(newItem2);
      } else {
        demoContainer.insertBefore(newItem, demoContainer.lastChild);
      }
    }
  </script>
</body>

</html>